apiVersion: skaffold/v2beta29
kind: Config
metadata:
  name: beam-pipeline-example
build:
  local:
    push: false
  artifacts:
  - image: beam-pipeline-example
    context: .
    jib:
      fromImage: "gcr.io/distroless/java17-debian11"
  tagPolicy:
    dateTime:
      format: "20060102T150405"
      timezone: "UTC"
deploy:
  kustomize:
    paths:
      - ./kubernetes-manifests/
profiles:
  - name: ci
    build:
      local:
        push: true
    patches:
      - op: replace
        path: /build/artifacts/0/image
        value: your-image-registry/beam-pipeline-example  # add your image registry as prefix here
